<section class="card">
  <h1>Mot de passe oublié</h1>
  <p>
    Saisissez l'email associé à votre compte. Vous recevrez un lien pour choisir un nouveau mot de
    passe (valide 1h).
  </p>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <label for="email">Email</label>
    <input
      id="email"
      type="email"
      autocomplete="email"
      formControlName="email"
      [class.invalid]="form.controls.email.touched && form.controls.email.invalid"
    />
    @if (form.controls.email.touched && form.controls.email.hasError('required')) {
      <p class="hint error">Email requis.</p>
    } @else if (form.controls.email.touched && form.controls.email.hasError('email')) {
      <p class="hint error">Format d'email invalide.</p>
    }

    <button type="submit" [disabled]="form.invalid || status() === 'loading'">
      Envoyer un lien de réinitialisation
    </button>
  </form>

  @if (status() === 'success' && message()) {
    <p class="status success">{{ message() }}</p>
  }

  @if (status() === 'error' && message()) {
    <p class="status error">{{ message() }}</p>
  }

  <p class="hint">
    <a routerLink="/login">Retourner à la connexion</a>
  </p>
</section>
