<section class="home">
  <h1>Accueil</h1>

  @if (isLoading()) {
    <p class="status">Chargement de votre session‚Ä¶</p>
  }

  @if (error() && !isLoggedIn()) {
    <p class="status error">{{ error() }}</p>
  }

  @if (isLoggedIn()) {
    <div class="card">
      <p>Bonjour {{ user()?.firstName }} {{ user()?.lastName }} üëã</p>
      <dl>
        <div>
          <dt>Pseudo</dt>
          <dd>{{ user()?.login }}</dd>
        </div>
        <div>
          <dt>Email</dt>
          <dd>{{ user()?.email }}</dd>
        </div>
        @if (user()?.phone) {
          <div>
            <dt>T√©l√©phone</dt>
            <dd>{{ user()?.phone }}</dd>
          </div>
        }
        <div>
          <dt>R√¥le</dt>
          <dd class="role">{{ user()?.role }}</dd>
        </div>
        <div>
          <dt>Statut email</dt>
          <dd>
            <span class="badge" [class.badge--warning]="!user()?.emailVerified">
              @if (user()?.emailVerified) {
                V√©rifi√©
              } @else {
                Non v√©rifi√©
              }
            </span>
          </dd>
        </div>
      </dl>

      @if (!user()?.emailVerified) {
        <p class="warning">
          Email non v√©rifi√©. V√©rifiez votre bo√Æte mail ou
          <a routerLink="/verify-email">entrez votre token manuellement</a>.
        </p>
      }

      <button type="button" (click)="logout()" [disabled]="isLoading()">
        Se d√©connecter
      </button>
    </div>
  } @else {
    <div class="card">
      <p>Vous n'√™tes pas connect√©.</p>
      <p>
        <a routerLink="/login">Aller √† la page de connexion</a>
        ou
        <a routerLink="/register">cr√©er un compte</a>.
      </p>
    </div>
  }
</section>
